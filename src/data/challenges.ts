export interface ChallengeStep {
  id: number;
  title: string;
  instruction: string;
  hint: string;
  type: 'multiple-choice' | 'fill-blank' | 'ordering' | 'config' | 'checkbox';
  // For multiple-choice
  options?: string[];
  correctAnswer?: number; // index
  // For fill-blank
  placeholder?: string;
  acceptedAnswers?: string[];
  // For ordering
  items?: string[];
  correctOrder?: number[];
  // For checkbox (multi-select)
  checkboxOptions?: string[];
  correctChecks?: number[];
  // For config (key-value pairs)
  configFields?: { label: string; placeholder: string; acceptedAnswers: string[] }[];
  explanation: string;
}

export interface Challenge {
  id: string;
  title: string;
  description: string;
  difficulty: 'Beginner' | 'Intermediate' | 'Advanced';
  type: 'guided' | 'timed' | 'puzzle' | 'debug';
  timeLimit?: number; // minutes
  xp: number;
  icon: string;
  steps: ChallengeStep[];
  completionMessage: string;
}

export const dailyChallenge: Challenge = {
  id: 'daily-webhook-slack',
  title: 'Build a Webhook â†’ Slack Notification',
  description: 'Create a workflow that receives webhook data and sends a formatted message to a Slack channel.',
  difficulty: 'Beginner',
  type: 'guided',
  timeLimit: 15,
  xp: 150,
  icon: 'ðŸ—“ï¸',
  steps: [
    {
      id: 1,
      title: 'Choose the trigger',
      instruction: 'Every n8n workflow starts with a trigger. Which node should you use to receive data from an external service?',
      hint: 'A webhook is a URL that listens for incoming HTTP requests.',
      type: 'multiple-choice',
      options: ['Schedule Trigger', 'Webhook', 'Manual Trigger', 'Email Trigger'],
      correctAnswer: 1,
      explanation: 'The Webhook node creates a URL that listens for incoming HTTP requests â€” perfect for receiving data from external services in real time.',
    },
    {
      id: 2,
      title: 'Configure the webhook method',
      instruction: 'Which HTTP method should you set on your Webhook node to receive JSON data from an external app?',
      hint: 'When sending data TO a server, we typically use the method that "posts" information.',
      type: 'multiple-choice',
      options: ['GET', 'POST', 'PUT', 'DELETE'],
      correctAnswer: 1,
      explanation: 'POST is used to send data to the server. External services will POST JSON data to your webhook URL.',
    },
    {
      id: 3,
      title: 'Extract the message',
      instruction: 'The webhook receives this JSON: `{ "event": "new_lead", "name": "Marie", "email": "marie@test.com" }`. Write the expression to access the name field.',
      hint: 'In n8n, you access incoming JSON data with {{ $json.fieldName }}',
      type: 'fill-blank',
      placeholder: '{{ $json.??? }}',
      acceptedAnswers: ['{{ $json.name }}', '{{$json.name}}', '$json.name'],
      explanation: '{{ $json.name }} accesses the "name" field from the incoming JSON payload. The $json variable represents the current item\'s data.',
    },
    {
      id: 4,
      title: 'Configure the Slack message',
      instruction: 'Now configure the Slack node. Fill in the channel and the message text using expressions.',
      hint: 'Use #general for the channel, and reference $json fields for dynamic content.',
      type: 'config',
      configFields: [
        { label: 'Channel', placeholder: '#channel-name', acceptedAnswers: ['#general', 'general', '#notifications'] },
        { label: 'Message', placeholder: 'New lead: ...', acceptedAnswers: ['New lead: {{ $json.name }}', '{{ $json.name }}', 'New lead: {{ $json.name }} ({{ $json.email }})'] },
      ],
      explanation: 'The Slack node sends messages to a specified channel. Using expressions like {{ $json.name }} makes the message dynamic based on the webhook data.',
    },
    {
      id: 5,
      title: 'Order the workflow',
      instruction: 'Put these nodes in the correct execution order for the workflow:',
      hint: 'Think about the data flow: receive â†’ process â†’ send.',
      type: 'ordering',
      items: ['Slack (Send Message)', 'Webhook (Receive Data)', 'Set Node (Format Message)'],
      correctOrder: [1, 2, 0],
      explanation: 'The correct order is: Webhook (receives data) â†’ Set Node (formats it) â†’ Slack (sends the message). Data flows from left to right in n8n.',
    },
  ],
  completionMessage: 'ðŸŽ‰ Amazing! You\'ve built a webhook-to-Slack notification workflow. This pattern is the foundation of most real-time integrations!',
};

export const challenges: Challenge[] = [
  {
    id: 'connect-webhook',
    title: 'Connect Your First Webhook',
    description: 'Learn how webhooks work by setting one up step by step.',
    difficulty: 'Beginner',
    type: 'guided',
    timeLimit: 5,
    xp: 100,
    icon: 'ðŸ”—',
    steps: [
      {
        id: 1,
        title: 'What is a webhook?',
        instruction: 'A webhook is a way for one app to send real-time data to another. Which analogy best describes a webhook?',
        hint: 'Think about receiving deliveries at your door vs going to the post office.',
        type: 'multiple-choice',
        options: [
          'A phone call you make to ask for info',
          'A doorbell â€” it notifies you when something arrives',
          'A scheduled alarm that goes off every hour',
          'A filing cabinet that stores data',
        ],
        correctAnswer: 1,
        explanation: 'A webhook is like a doorbell â€” it\'s a passive listener that notifies your workflow when new data arrives, rather than you having to check repeatedly (polling).',
      },
      {
        id: 2,
        title: 'Create the Webhook node',
        instruction: 'In n8n, which type of node is a Webhook?',
        hint: 'It\'s the starting point of a workflow that waits for external data.',
        type: 'multiple-choice',
        options: ['Action node', 'Trigger node', 'Transform node', 'Output node'],
        correctAnswer: 1,
        explanation: 'The Webhook is a Trigger node â€” it starts your workflow when it receives an HTTP request. Every workflow needs exactly one trigger.',
      },
      {
        id: 3,
        title: 'Choose the right path',
        instruction: 'Your webhook receives customer data. You want to save new customers but ignore existing ones. Which node do you add after the Webhook?',
        hint: 'You need to make a decision based on a condition.',
        type: 'multiple-choice',
        options: ['Set Node', 'IF Node', 'Merge Node', 'Code Node'],
        correctAnswer: 1,
        explanation: 'The IF node lets you create conditional logic â€” checking if a customer is new or existing, and routing the data accordingly.',
      },
    ],
    completionMessage: 'ðŸ”— Great job! You understand how webhooks work. They\'re the backbone of real-time automation!',
  },
  {
    id: 'json-parser',
    title: 'Build a JSON Parser',
    description: 'Parse, extract, and transform JSON data like a pro.',
    difficulty: 'Beginner',
    type: 'guided',
    timeLimit: 10,
    xp: 120,
    icon: 'ðŸ“‹',
    steps: [
      {
        id: 1,
        title: 'Identify JSON structure',
        instruction: 'Look at this JSON: `{ "user": { "name": "Alex", "skills": ["n8n", "zapier"] } }`. How do you access the name?',
        hint: 'Nested objects use dot notation.',
        type: 'fill-blank',
        placeholder: '{{ $json.??? }}',
        acceptedAnswers: ['{{ $json.user.name }}', '{{$json.user.name}}', '$json.user.name'],
        explanation: 'Use dot notation to access nested values: $json.user.name navigates into the "user" object and retrieves "name".',
      },
      {
        id: 2,
        title: 'Access array elements',
        instruction: 'From the same JSON, how do you access the first skill ("n8n")?',
        hint: 'Arrays use bracket notation with an index starting at 0.',
        type: 'fill-blank',
        placeholder: '{{ $json.??? }}',
        acceptedAnswers: ['{{ $json.user.skills[0] }}', '{{$json.user.skills[0]}}', '$json.user.skills[0]'],
        explanation: 'Arrays are zero-indexed, so skills[0] gets "n8n" (the first element) and skills[1] would get "zapier".',
      },
      {
        id: 3,
        title: 'Transform the data',
        instruction: 'You need to create a "summary" field that combines name and first skill. Which Set node configuration is correct?',
        hint: 'Use string concatenation with expressions.',
        type: 'multiple-choice',
        options: [
          'summary = {{ $json.name }} knows {{ $json.skills }}',
          'summary = {{ $json.user.name }} knows {{ $json.user.skills[0] }}',
          'summary = $json.user.name + $json.user.skills',
          'summary = {{ $json.user }} knows {{ $json.skills[0] }}',
        ],
        correctAnswer: 1,
        explanation: 'The correct path is $json.user.name and $json.user.skills[0], wrapped in {{ }} expressions to evaluate them in the Set node.',
      },
      {
        id: 4,
        title: 'Handle missing data',
        instruction: 'What happens if you try to access {{ $json.user.phone }} and that field doesn\'t exist?',
        hint: 'Think about what "undefined" means in programming.',
        type: 'multiple-choice',
        options: [
          'The workflow crashes',
          'It returns "undefined" and continues',
          'It returns an empty string',
          'It skips the entire node',
        ],
        correctAnswer: 1,
        explanation: 'Accessing a non-existent field returns "undefined". The workflow continues, but you should handle this with IF nodes or default values to avoid passing bad data downstream.',
      },
    ],
    completionMessage: 'ðŸ“‹ You\'re now a JSON parsing expert! This skill is essential for every single n8n workflow.',
  },
  {
    id: 'email-sorter',
    title: 'Create a Conditional Email Sorter',
    description: 'Build logic to sort incoming emails into categories using IF and Switch nodes.',
    difficulty: 'Beginner',
    type: 'guided',
    timeLimit: 15,
    xp: 150,
    icon: 'ðŸ“§',
    steps: [
      {
        id: 1,
        title: 'Choose the trigger',
        instruction: 'You want to automatically sort emails as they arrive. Which trigger should you use?',
        hint: 'You want to react to new emails coming into your inbox.',
        type: 'multiple-choice',
        options: ['Webhook Trigger', 'Schedule Trigger', 'Gmail Trigger (on new email)', 'Manual Trigger'],
        correctAnswer: 2,
        explanation: 'The Gmail Trigger fires every time a new email arrives, making it perfect for real-time email processing.',
      },
      {
        id: 2,
        title: 'Define sorting categories',
        instruction: 'Select all the categories you\'d want to sort emails into (select all that apply):',
        hint: 'Think about common email types in a business context.',
        type: 'checkbox',
        checkboxOptions: ['Urgent / High Priority', 'Client Inquiries', 'Newsletters / Marketing', 'Internal Team', 'Spam / Irrelevant'],
        correctChecks: [0, 1, 2, 3, 4],
        explanation: 'All of these are valid categories! A good email sorter handles all types. In n8n, you\'d use a Switch node to route emails to different paths based on rules.',
      },
      {
        id: 3,
        title: 'Build the condition',
        instruction: 'To check if an email subject contains "URGENT", which expression would you use in an IF node?',
        hint: 'String methods like .includes() or .contains() can check for substrings.',
        type: 'multiple-choice',
        options: [
          '{{ $json.subject }} === "URGENT"',
          '{{ $json.subject.includes("URGENT") }}',
          '{{ $json.from }} contains "URGENT"',
          '{{ $json.body.startsWith("URGENT") }}',
        ],
        correctAnswer: 1,
        explanation: '$json.subject.includes("URGENT") checks if the subject line contains the word "URGENT" anywhere. This is more flexible than exact matching.',
      },
      {
        id: 4,
        title: 'Route the workflow',
        instruction: 'You have 4 categories. Which node is better than chaining multiple IF nodes?',
        hint: 'There\'s a node designed specifically for multiple conditions/routes.',
        type: 'multiple-choice',
        options: ['Merge Node', 'Switch Node', 'Code Node', 'Set Node'],
        correctAnswer: 1,
        explanation: 'The Switch node handles multiple conditions in one node, routing data to different outputs. Much cleaner than chaining IF â†’ IF â†’ IF!',
      },
      {
        id: 5,
        title: 'Complete the workflow order',
        instruction: 'Arrange the nodes for the complete email sorting workflow:',
        hint: 'Trigger â†’ Sort â†’ Act on each category.',
        type: 'ordering',
        items: ['Add Label in Gmail', 'Gmail Trigger', 'Switch Node (categorize)', 'Set Node (add metadata)'],
        correctOrder: [1, 3, 2, 0],
        explanation: 'Gmail Trigger â†’ Set Node (extract/format key data) â†’ Switch Node (categorize by rules) â†’ Add Label (organize the email).',
      },
    ],
    completionMessage: 'ðŸ“§ Excellent! You\'ve designed an intelligent email sorter. This pattern works for any kind of data classification!',
  },
  {
    id: 'lead-capture',
    title: 'Build a Lead Capture System',
    description: 'Create a complete lead capture pipeline: webhook â†’ validation â†’ storage â†’ notification.',
    difficulty: 'Intermediate',
    type: 'guided',
    timeLimit: 20,
    xp: 200,
    icon: 'ðŸŽ¯',
    steps: [
      {
        id: 1,
        title: 'Design the data flow',
        instruction: 'Order these steps for a lead capture system:',
        hint: 'Think: receive â†’ validate â†’ store â†’ notify.',
        type: 'ordering',
        items: ['Send Slack notification', 'Validate email format', 'Webhook receives form data', 'Save to Google Sheets'],
        correctOrder: [2, 1, 3, 0],
        explanation: 'Webhook (receive) â†’ Validate (check data quality) â†’ Google Sheets (persist) â†’ Slack (alert your team). Always validate before storing!',
      },
      {
        id: 2,
        title: 'Validate the email',
        instruction: 'Which expression checks if an email field contains "@" and "."?',
        hint: 'You can use .includes() multiple times or use a regex pattern.',
        type: 'multiple-choice',
        options: [
          '{{ $json.email.includes("@") && $json.email.includes(".") }}',
          '{{ $json.email === "valid" }}',
          '{{ $json.email.length > 5 }}',
          '{{ $json.email.isEmail() }}',
        ],
        correctAnswer: 0,
        explanation: 'Checking for "@" and "." is a basic email validation. In production, you might use a regex or a dedicated validation service.',
      },
      {
        id: 3,
        title: 'Configure Google Sheets',
        instruction: 'Set up the Google Sheets node to store leads. Fill in the field mappings:',
        hint: 'Map each form field to a spreadsheet column.',
        type: 'config',
        configFields: [
          { label: 'Name Column', placeholder: 'Expression for name...', acceptedAnswers: ['{{ $json.name }}', '$json.name'] },
          { label: 'Email Column', placeholder: 'Expression for email...', acceptedAnswers: ['{{ $json.email }}', '$json.email'] },
          { label: 'Date Column', placeholder: 'Expression for date...', acceptedAnswers: ['{{ $now }}', '{{ new Date() }}', '$now', '{{ $json.date }}'] },
        ],
        explanation: 'Map each incoming field to a spreadsheet column. The $now variable gives you the current timestamp for tracking when the lead was captured.',
      },
      {
        id: 4,
        title: 'Error handling',
        instruction: 'What should happen if the Google Sheets API fails?',
        hint: 'You don\'t want to lose the lead data even if storage fails.',
        type: 'multiple-choice',
        options: [
          'Ignore the error and continue',
          'Stop the workflow immediately',
          'Use an Error Trigger to retry and send an alert',
          'Delete the lead data',
        ],
        correctAnswer: 2,
        explanation: 'The Error Trigger catches failures and lets you retry the operation or alert your team. Never silently lose data!',
      },
    ],
    completionMessage: 'ðŸŽ¯ You\'ve built a production-ready lead capture system! This is one of the most requested automation services.',
  },
  {
    id: 'fix-workflow',
    title: 'Fix This Broken Workflow',
    description: 'Find and fix 3 bugs in a broken email automation workflow.',
    difficulty: 'Intermediate',
    type: 'debug',
    timeLimit: 10,
    xp: 180,
    icon: 'ðŸ›',
    steps: [
      {
        id: 1,
        title: 'Bug #1: Wrong trigger',
        instruction: 'This workflow should fire when a new row is added to Google Sheets, but it\'s using a Schedule Trigger (runs every hour). What\'s the problem with this approach?',
        hint: 'Think about latency â€” how long could a new lead wait?',
        type: 'multiple-choice',
        options: [
          'Nothing wrong, Schedule is fine',
          'New leads could wait up to 59 minutes before being processed',
          'Schedule Trigger can\'t read Google Sheets',
          'It will use too many API calls',
        ],
        correctAnswer: 1,
        explanation: 'With a Schedule Trigger, new leads could wait up to 59 minutes. Switch to a Google Sheets Trigger or a Webhook for near-instant processing.',
      },
      {
        id: 2,
        title: 'Bug #2: Expression error',
        instruction: 'The Set node uses `{{ $json.user.email }}` but the incoming data structure is `{ "email": "test@mail.com", "name": "Test" }`. What\'s wrong?',
        hint: 'Look carefully at the JSON structure â€” is "email" nested under "user"?',
        type: 'fill-blank',
        placeholder: 'Correct expression: {{ $json.??? }}',
        acceptedAnswers: ['{{ $json.email }}', '{{$json.email}}', '$json.email'],
        explanation: 'The email is at the root level, not nested under "user". The correct expression is {{ $json.email }}. Always check your data structure in the input panel!',
      },
      {
        id: 3,
        title: 'Bug #3: Missing error handling',
        instruction: 'The workflow sends an email but has no error handling. If the email service is down, what happens?',
        hint: 'Without error handling, failures are silent.',
        type: 'multiple-choice',
        options: [
          'n8n automatically retries',
          'The workflow stops and the execution fails silently',
          'The email gets queued',
          'The data is automatically saved for later',
        ],
        correctAnswer: 1,
        explanation: 'Without error handling, the workflow fails and you won\'t know about it. Add an Error Trigger node to catch failures and alert you!',
      },
    ],
    completionMessage: 'ðŸ› Bug hunter! You\'ve identified and fixed 3 common workflow issues. Debugging skills are crucial for production automations.',
  },
  {
    id: 'slack-bot',
    title: 'Create a Slack Bot',
    description: 'Build a Slack bot that responds to messages with AI-generated answers.',
    difficulty: 'Intermediate',
    type: 'guided',
    timeLimit: 25,
    xp: 250,
    icon: 'ðŸ’¬',
    steps: [
      {
        id: 1,
        title: 'Choose the trigger',
        instruction: 'To make a bot that responds to Slack messages, which trigger do you need?',
        hint: 'You need to listen for new messages in a Slack channel.',
        type: 'multiple-choice',
        options: ['Webhook', 'Slack Trigger (on new message)', 'Schedule Trigger', 'Manual Trigger'],
        correctAnswer: 1,
        explanation: 'The Slack Trigger fires when a new message is posted. You can filter by channel, user, or keywords.',
      },
      {
        id: 2,
        title: 'Filter bot messages',
        instruction: 'Your bot shouldn\'t respond to its own messages (infinite loop!). What check do you add?',
        hint: 'Check if the message sender is the bot itself.',
        type: 'multiple-choice',
        options: [
          'Check if message length > 0',
          'Check if sender is NOT the bot user ID',
          'Check if the channel is public',
          'Check if the message has attachments',
        ],
        correctAnswer: 1,
        explanation: 'Always filter out the bot\'s own messages to prevent infinite loops! Use an IF node: $json.user !== "BOT_USER_ID".',
      },
      {
        id: 3,
        title: 'Add AI response',
        instruction: 'Which node generates an AI response to the user\'s question?',
        hint: 'You need a node that can call a Large Language Model.',
        type: 'multiple-choice',
        options: ['Set Node', 'HTTP Request (to OpenAI)', 'Code Node', 'Merge Node'],
        correctAnswer: 1,
        explanation: 'The HTTP Request node calls the OpenAI API with the user\'s message as a prompt and returns the AI-generated response.',
      },
      {
        id: 4,
        title: 'Build the workflow',
        instruction: 'Order the complete workflow:',
        hint: 'Listen â†’ Filter â†’ Think â†’ Reply.',
        type: 'ordering',
        items: ['Slack: Send Reply', 'IF: Not Bot Message', 'OpenAI: Generate Response', 'Slack Trigger: New Message'],
        correctOrder: [3, 1, 2, 0],
        explanation: 'Slack Trigger â†’ IF (filter bot messages) â†’ OpenAI (generate reply) â†’ Slack Send (post response). Clean and effective!',
      },
      {
        id: 5,
        title: 'Handle rate limits',
        instruction: 'OpenAI has rate limits. What\'s the best way to handle this in your workflow?',
        hint: 'Think about what happens when you exceed the API limit.',
        type: 'multiple-choice',
        options: [
          'Ignore errors and hope for the best',
          'Add a Wait node with retry logic and error handling',
          'Send all messages at once',
          'Remove the AI node when rate limited',
        ],
        correctAnswer: 1,
        explanation: 'Add retry logic with exponential backoff. The Wait node can pause before retrying, and Error Handling ensures you catch and manage failures gracefully.',
      },
    ],
    completionMessage: 'ðŸ’¬ Your AI Slack bot is ready! This is a high-value automation that companies pay for.',
  },
  {
    id: 'ai-email-responder',
    title: 'Build an AI Email Responder',
    description: 'Create an intelligent email responder that classifies emails and generates contextual replies.',
    difficulty: 'Advanced',
    type: 'guided',
    timeLimit: 30,
    xp: 300,
    icon: 'ðŸ¤–',
    steps: [
      {
        id: 1,
        title: 'Design the classification system',
        instruction: 'Before building, plan your email categories. Select all that an AI classifier should handle:',
        hint: 'Think about the types of emails a business receives daily.',
        type: 'checkbox',
        checkboxOptions: ['Support requests', 'Sales inquiries', 'Meeting requests', 'Spam/Marketing', 'Urgent issues'],
        correctChecks: [0, 1, 2, 3, 4],
        explanation: 'A robust classifier handles all common categories. The AI will analyze email content and assign a category before generating a response.',
      },
      {
        id: 2,
        title: 'Build the classification prompt',
        instruction: 'Which prompt engineering technique is best for email classification?',
        hint: 'You want consistent, structured output from the AI.',
        type: 'multiple-choice',
        options: [
          'Just say "classify this email"',
          'Provide categories, examples, and ask for JSON output',
          'Let the AI decide its own categories',
          'Use a single word prompt',
        ],
        correctAnswer: 1,
        explanation: 'Few-shot prompting with examples and structured JSON output gives the most reliable classification. Always specify the exact format you want!',
      },
      {
        id: 3,
        title: 'Configure the response generation',
        instruction: 'For the AI response node, what should you include in the system prompt?',
        hint: 'The system prompt sets the AI\'s behavior and constraints.',
        type: 'config',
        configFields: [
          { label: 'Role', placeholder: 'You are a...', acceptedAnswers: ['customer support agent', 'professional assistant', 'email responder', 'support agent'] },
          { label: 'Tone', placeholder: 'Professional, friendly...', acceptedAnswers: ['professional', 'friendly', 'professional and friendly', 'helpful'] },
        ],
        explanation: 'A good system prompt defines the AI\'s role, tone, and constraints. This ensures consistent, on-brand responses.',
      },
      {
        id: 4,
        title: 'Add safety checks',
        instruction: 'Before sending an AI-generated response, what safety measure should you add?',
        hint: 'AI can hallucinate or generate inappropriate content.',
        type: 'multiple-choice',
        options: [
          'Send immediately â€” AI is always right',
          'Add a human review step for sensitive categories',
          'Only respond to emails with attachments',
          'Limit responses to 10 words',
        ],
        correctAnswer: 1,
        explanation: 'Always add human review for sensitive or high-stakes emails. You can auto-respond to simple queries but flag complex ones for manual review.',
      },
      {
        id: 5,
        title: 'Order the complete workflow',
        instruction: 'Arrange the full AI email responder workflow:',
        hint: 'Receive â†’ Classify â†’ Generate â†’ Review â†’ Send.',
        type: 'ordering',
        items: ['Send Reply via Gmail', 'Gmail Trigger', 'OpenAI: Classify Email', 'OpenAI: Generate Response', 'IF: Needs Human Review?'],
        correctOrder: [1, 2, 3, 4, 0],
        explanation: 'Gmail Trigger â†’ Classify â†’ Generate Response â†’ Check if review needed â†’ Send. This creates a robust, safe email automation.',
      },
    ],
    completionMessage: 'ðŸ¤– Incredible! You\'ve built an AI-powered email responder. This is a premium automation service worth $2,000+ for clients!',
  },
  {
    id: 'approval-workflow',
    title: 'Multi-Step Approval Workflow',
    description: 'Build a complete approval system with multiple reviewers, escalation, and audit logging.',
    difficulty: 'Advanced',
    type: 'guided',
    timeLimit: 45,
    xp: 400,
    icon: 'âœ…',
    steps: [
      {
        id: 1,
        title: 'Design the approval chain',
        instruction: 'An expense report over $1000 needs manager AND director approval. Under $1000 needs only manager. Which node handles this routing?',
        hint: 'You need conditional branching based on the amount.',
        type: 'multiple-choice',
        options: ['Merge Node', 'Switch Node', 'IF Node', 'Set Node'],
        correctAnswer: 2,
        explanation: 'The IF node checks the amount: if > $1000, route to the multi-approval path; otherwise, route to single approval. Simple and effective.',
      },
      {
        id: 2,
        title: 'Implement the wait mechanism',
        instruction: 'After sending an approval request, how do you pause the workflow until the manager responds?',
        hint: 'n8n has a special mechanism for waiting for external events.',
        type: 'multiple-choice',
        options: [
          'Use a Schedule node to check every minute',
          'Use a Wait node with webhook resume',
          'Use a Loop node to keep checking',
          'End the workflow and start a new one',
        ],
        correctAnswer: 1,
        explanation: 'The Wait node can pause execution and resume when a webhook is called â€” perfect for approval flows where you need human input.',
      },
      {
        id: 3,
        title: 'Handle timeout / escalation',
        instruction: 'If the manager doesn\'t respond within 24 hours, what should happen?',
        hint: 'You don\'t want requests stuck forever.',
        type: 'checkbox',
        checkboxOptions: ['Send a reminder to the manager', 'Escalate to their supervisor', 'Auto-reject after 48 hours', 'Log the timeout event'],
        correctChecks: [0, 1, 2, 3],
        explanation: 'All of these are valid escalation strategies! A robust approval system handles timeouts gracefully with reminders, escalation, and audit trails.',
      },
      {
        id: 4,
        title: 'Build the complete flow',
        instruction: 'Order the approval workflow steps:',
        hint: 'Submit â†’ Route â†’ Approve â†’ Notify â†’ Log.',
        type: 'ordering',
        items: ['Log decision to database', 'Webhook: Receive request', 'IF: Amount > $1000?', 'Send approval email', 'Wait for response'],
        correctOrder: [1, 2, 3, 4, 0],
        explanation: 'Webhook â†’ IF (route by amount) â†’ Email approval request â†’ Wait for response â†’ Log the decision. Clean multi-step approval!',
      },
    ],
    completionMessage: 'âœ… You\'ve mastered approval workflows! These systems are essential for enterprise automation and are highly valued by clients.',
  },
];
